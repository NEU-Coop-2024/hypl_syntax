import { EditorView, minimalSetup } from 'codemirror';
import { LRParser } from '@lezer/lr';
import { HighlightStyle, LRLanguage, indentNodeProp, delimitedIndent, foldNodeProp, foldInside, LanguageSupport, syntaxHighlighting } from '@codemirror/language';
import { styleTags, tags } from '@lezer/highlight';

// This file was generated by lezer-generator. You probably shouldn't edit it.
const parser = LRParser.deserialize({
  version: 14,
  states: "!WQQOPOOO`OPO'#CaOOOO'#Cd'#CdOOOO'#Cb'#CbQQOPOOOOOO,58{,58{OqOPO,58{OOOO-E6`-E6`OOOO1G.g1G.g",
  stateData: "!S~OQQORQOSQOYPO~OQQORQOSQOXTOYPO~OQQORQOSQOXWOYPO~O",
  goto: "pXPPPPPY`PjXQOPSUQSOQUPTVSUXROPSU",
  nodeNames: "âš  Program Identifier Name Number Application",
  maxTerm: 10,
  skippedNodes: [0],
  repeatNodeCount: 1,
  tokenData: "!e~RTxybyzg!Q![l!c!}q#T#o!S~gOY~~lOX~~qOS~~vSR~!Q![q!c!}q#R#Sq#T#oq~!XSQ~!Q![!S!c!}!S#R#S!S#T#o!S",
  tokenizers: [0],
  topRules: {"Program":[0,1]},
  tokenPrec: 0
});

const hyplHighlight = styleTags({
    Identifier: tags.variableName,
    Name: tags.name,
    Number: tags.number,
    "( )": tags.paren
});
const hyplHighlightStyle = HighlightStyle.define([
    { tag: tags.variableName, color: "#2689C7" },
    { tag: tags.name, color: "#d90cfe" },
    { tag: tags.number, color: "#91041e" },
]);

const HyplLanguage = LRLanguage.define({
    parser: parser.configure({
        props: [
            indentNodeProp.add({
                Application: delimitedIndent({ closing: ")", align: false }),
            }),
            foldNodeProp.add({
                Application: foldInside,
            }),
            hyplHighlight,
        ],
    }),
    languageData: {
        commentTokens: { line: ";" },
    },
});
function Hypl() {
    return new LanguageSupport(HyplLanguage, syntaxHighlighting(hyplHighlightStyle));
}
const initialText = '(popid) Varid <- Varid';
const targetElements = document.querySelector('.hypl');
new EditorView({
    doc: initialText,
    extensions: [
        minimalSetup,
        Hypl(),
    ],
    parent: targetElements,
});

export { Hypl, HyplLanguage };
