import { EditorView, minimalSetup } from 'codemirror';
import { LRParser } from '@lezer/lr';
import { LRLanguage, indentNodeProp, delimitedIndent, foldNodeProp, foldInside, LanguageSupport } from '@codemirror/language';

// This file was generated by lezer-generator. You probably shouldn't edit it.
const parser = LRParser.deserialize({
  version: 14,
  states: "!QOQOPOOOVOPO'#C^QOOOOOO[OPO,58xOaOPO1G.dOfOPO7+$OOkOPO<<GjOOOOAN=UAN=U",
  stateData: "p~ORPO~OVRO~OSSO~OWTO~OTUO~OWVO~O",
  goto: "VRPPSRQO",
  nodeNames: "âš  Hypl Expression LParen RParen Arrow",
  maxTerm: 8,
  skippedNodes: [0],
  repeatNodeCount: 0,
  tokenData: "!k~RTxybyzg!^!_l!c!}w#T#o!Y~gOR~~lOS~~oP}!Or~wOT~~|SW~!Q![w!c!}w#R#Sw#T#ow~!_SV~!Q![!Y!c!}!Y#R#S!Y#T#o!Y",
  tokenizers: [0],
  topRules: {"Hypl":[0,1]},
  tokenPrec: 0
});

const HyplLanguage = LRLanguage.define({
    parser: parser.configure({
        props: [
            indentNodeProp.add({
                Application: delimitedIndent({ closing: ")", align: false }),
            }),
            foldNodeProp.add({
                Application: foldInside,
            }),
        ],
    }),
    languageData: {
        commentTokens: { line: ";" },
    },
});
const test = "TESTING";
function Hypl() {
    return new LanguageSupport(HyplLanguage);
}
const initialText = '(popid) Varid <- Varid';
const targetElement = document.querySelector('#editor');
new EditorView({
    doc: initialText,
    extensions: [
        minimalSetup,
        Hypl(),
    ],
    parent: targetElement,
});

export { Hypl, HyplLanguage, test };
